<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="jakarta.faces.facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>Jogo de Soma - Jeniffer</title>
</h:head>

<h:body style="font-family: Arial; margin: 40px;">
    <h1>ðŸŽ¯ Jogo de Soma com Ranking</h1>

   
    <h:form id="mainForm">
        <h:panelGroup rendered="#{!jogoController.iniciado}">
            <h:outputLabel value="Informe seu nome: " />
            <h:inputText value="#{jogoController.nome}" />
            <h:commandButton value="OK" action="#{jogoController.iniciar}" />
        </h:panelGroup>

       
        <h:panelGroup rendered="#{jogoController.iniciado}">
            <h3>Quanto Ã©:
                <h:outputText value="#{jogoController.numero1}" /> +
                <h:outputText value="#{jogoController.numero2}" /> =
            </h3>

            <h:inputText value="#{jogoController.resposta}" />
            <h:commandButton value="Verificar" action="#{jogoController.verificar}" />
            <br/><br/>

            <h:outputText value="#{jogoController.mensagem}" style="font-weight:bold;" />
            <br/><br/>

            
            <h:panelGroup id="rankingPanel">
                <h:outputText value="===== Ranking Atual =====" style="font-weight:bold;" /><br/>
                <ui:repeat value="#{jogoController.rankingLista}" var="j" varStatus="st">
                    #{st.index + 1}. #{j.nome} - #{j.pontos} pontos<br/>
                </ui:repeat>
            </h:panelGroup>

            <br/>
            <h:commandButton value="ðŸ”„ Trocar Jogador" action="#{jogoController.reiniciar}" />
        </h:panelGroup>
    </h:form>

    <h:form id="refreshForm">
        <h:commandButton id="refreshButton" style="display:none">
            
            <f:ajax render=":mainForm:rankingPanel" />
        </h:commandButton>
    </h:form>

    <script type="text/javascript">
     
        setInterval(function () {
            var btn = document.getElementById('refreshForm:refreshButton');
            if (btn) {
                btn.click();
            }
        }, 1000);
    </script>

</h:body>
</html>
